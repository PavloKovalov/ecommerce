<?php $this->headTitle($this->translate('Manage taxes')); ?>
<style>
    .taxrule {
        margin-top: 5px;
    }
    .ui-widget-header label {
      display: inline;
      vertical-align: bottom;
    }
    #price-inc-tax {margin-top:2px;}
</style>

<?php
$this->headScript()->appendFile($this->websiteUrl.'plugins/shopping/web/js/libs/require/require.js', null, array('data-main' => $this->websiteUrl.'plugins/shopping/web/js/taxes.js'));
?>

<script id="ruleTemplate" type="text/x-jquery-tmpl">
	{{if id}}
    <input type="hidden" name="rule-id" value="${id}"/>
    {{/if}}
    <div class="grid_1 textcentered mt8px">
        <input type="radio" name="default" {{if isDefault == 1}}checked="checked"{{/if}} />
    </div>
    <div class="grid_4">
        <select name="zoneId" data-reflection="property" style="width: 95%">
        <option value="-1"><?php echo $this->translate('Select zone');?></option>
        {{tmpl '#zoneListTemplate'}}
        </select>
    </div>
    <div class="grid_6" style="white-space:nowrap; font-weight:bold;">
        <div class="grid_4 alpha">
            <input type="text" name="rate1" data-reflection="property" style="width: 85%" value="${rate1}" placeholder="0"/>%
        </div>
        <div class="grid_4 ">
            <input type="text" name="rate2" data-reflection="property" style="width: 85%" value="${rate2}" placeholder="0"/>%
        </div>
        <div class="grid_4 omega">
            <input type="text" name="rate3" data-reflection="property" style="width: 85%" value="${rate3}" placeholder="0"/>%
        </div>
    </div>
    <div class="grid_1 textcentered mt8px">
        <a href="javascript:;" class="delete-rule">
            <img src="<?php echo $this->websiteUrl;?>system/images/delete.png" />
        </a>
    </div>
</script>
<script id="zoneListTemplate" type="text/x-jquery-tmpl">
    {{each app.zones.toJSON()}}
	<option value="${id}" {{if zoneId}}{{if zoneId == id}}selected{{/if}}{{/if}}>${name}</option>
	{{/each}}
</script>

<?php
$this->placeholder('headerContent')->captureStart();
	echo $this->formCheckbox('price-inc-tax', null, ($this->priceIncTax ? array('checked' => (bool)$this->priceIncTax) : null) );
	echo $this->formLabel('price-inc-tax', $this->translate('Show product price with tax included.'));
$this->placeholder('headerContent')->captureEnd();
?>

<div id="manage-taxes">

	<div class="ui-helper-clearfix padding10px" style="text-align:center; font-weight:bold; line-height: 20px;">
		<div class="grid_1">Selected</div>
		<div class="grid_4"><a href="javascript:;" data-url="<?php echo trim($this->websiteUrl, ' /').$this->url(array('run' => 'zones'));?>" class="tpopup" title="Click here to open zone manager">Manage zones<span class="ui-icon ui-icon-newwin" style="display: inline-block;"></span></a></div>
		<div class="grid_6">
			<div class="grid_4 alpha">Default Tax</div>
			<div class="grid_4">Tax Rate 1</div>
			<div class="grid_4 omega">Tax Rate 2</div>
		</div>
		<div class="grid_1">&nbsp;</div>
	</div>

	<div id="rules" class="ui-widget-content ui-helper-clearfix h450" style="overflow-x: hidden; overflow-y: auto;">
		<!-- container for rules -->
	</div>

	<div class="padding10px">
		<button id="new-rule-btn" class="blue-btn"><?php echo $this->translate('Add new');?></button>
		<button id="save-btn" style="float:right;"><?php echo $this->translate('Save');?></button>
	</div>
</div>
