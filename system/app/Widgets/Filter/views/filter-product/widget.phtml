<form class="plugin-filtering-widget filtering-form">
    <ul>
    <?php if (!empty($this->brands)) : ?>
        <li>
            <header><?php echo $this->translate('Brand'); ?></header>
            <ul>
            <?php foreach ($this->brands as $brand) :?>
                <li>
                    <label>
                        <input type="checkbox"
                               name="brand"
                               value="<?php echo $brand['name']; ?>"
                               <?php if ($brand['checked']) echo 'checked'; ?>
                            />
                        <a href="<?php echo $this->url().'?brand='.urlencode($brand['name']); ?>"><?php echo $brand['name']; ?></a></label>
                </li>
            <?php endforeach; ?>
            </ul>
        </li>
    <?php endif; ?>
    <?php if (!empty($this->tags)) : ?>
        <li>
            <header><?php echo $this->translate('Category'); ?></header>
            <ul>
            <?php foreach ($this->tags as $tag) :?>
                <li>
                    <label>
                        <input type="checkbox"
                               name="category"
                               value="<?php echo $tag['name']; ?>"
                               <?php if ($tag['checked']) echo 'checked'; ?>
                            />
                        <a href="<?php echo $this->url().'?category='.urlencode($tag['name']); ?>"><?php echo $tag['name']; ?></a></label>
                </li>
            <?php endforeach; ?>
            </ul>
        </li>
    <?php endif; ?>
    <?php if ($this->priceRange) :?>
        <?php
        $priceRange = array(
            'min' => (empty($this->priceRange['from']) ? $this->priceRange['min'] : $this->priceRange['from']),
            'max' => (empty($this->priceRange['to']) ? $this->priceRange['max'] : $this->priceRange['to'])
        );
        ?>
        <li class="filter-price">
            <label class="filter-label">
                <?php echo $this->translate('Price'); ?>
            </label>
            <label><?php echo $this->translate('From'); ?></label>
            <input type="text" class="price-field price-min" value="<?php echo $priceRange['min'] ?>"/>
            <label><?php echo $this->translate('To'); ?></label>
            <input type="text" class="price-field price-max" value="<?php echo $priceRange['max']; ?>"/>
            <input type="hidden" name="price" value="<?php echo implode('-', $priceRange); ?>"/>
        </li>
    <?php endif; ?>
    <?php foreach ($this->filters as $filter) : ?>
        <li>
            <header><?php echo $filter['label']; ?></header>
            <ul>
                <?php
                foreach ($filter['value'] as $value) : ?>
                    <?php $checked = in_array($value, $filter['checked']); ?>
                    <li>
                        <label>
                            <input type="checkbox"
                                   name="<?php echo $filter['name']; ?>"
                                   value="<?php echo $value; ?>"
                                   <?php if ($checked) { echo 'checked'; }; ?>
                                />
                            <a href="<?php echo $this->url().'?'.$filter['name'].'='.urlencode($value); ?>"><?php echo $value; ?></a></label>
                    </li>
                <?php endforeach; ?>
            </ul>
        </li>
    <?php endforeach; ?>
    </ul>
    <button><?php echo $this->translate('Apply filters');?></button>
</form>
<?php if ($this->priceRange) :?>
<script>
    $(function(){
//        $('div.slider').each(function () {
//            var self = this,
//                min = Math.floor(parseFloat($(this).data('min'))),
//                max = Math.ceil(parseFloat($(this).data('max'))),
//                from = $(this).find('span.')
//            $(this).slider({
//                range: true,
//                min: min,
//                max: max,
//                values: [ min, max ],
//                slide: function( event, ui ) {
//                    $(self).find('input[name=price]').val( ui.values[0] + " - " + ui.values[1] );
//                }
//            });
//
//
//        });
        $(".price-field").on('change', function(){
           $('input[name=price]').val(''+parseFloat($(".price-min").val())+'-'+ parseFloat($(".price-max").val()));
        });
    });
</script>
<?php endif; ?>